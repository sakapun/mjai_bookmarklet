<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>麻雀AI Mortal便利ブックマークレット</title>
</head>
<body>
<h1>このボタンをブックマークレット保存</h1>
<button id="savebtn" class="btn btn-success">
    麻雀AI Mortal便利ブックマークレット
</button>
<script type="application/javascript">
document.querySelector("#savebtn").addEventListener('click', () => {
    browser.bookmarks.create(
        {
            title: '麻雀AI Mortal便利ブックマークレット',
            url: "javascript:(function%20showMissOnly()%7Bconst%20grade%3DNumber.parseInt(window.prompt(%22%E4%B8%80%E8%87%B4%E5%BA%A6%E9%A0%86%E4%BD%8D%E3%81%8C%E3%81%93%E3%81%AE%E9%A0%86%E4%BD%8D%E3%82%88%E3%82%8A%E6%82%AA%E3%81%84%E6%99%82%22%2C%222%22))%3Bconst%20threshold%3Dgrade%20%3E%3D3%20%3F%20100%20%3A%20Number.parseInt(window.prompt(%22%EF%BC%92%E4%BD%8D%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E3%81%97%E3%81%8D%E3%81%84%E5%80%A4%22%2C%2270%22))%3Bconst%20turnList%3Ddocument.querySelectorAll(%22details.collapse%22)%3Bfor(const%20turn%20of%20turnList)%7Bconst%20turnInfo%3Dturn.querySelector(%22.turn-info%22)%3Bif(turnInfo%20!%3D%3Dnull)%7Bconst%20orderLoss%3DturnInfo.querySelector(%22.order-loss%22)%3Bconst%20firstScore%3DNumber.parseFloat(turn.querySelector(%22details%3Etable%3Etbody%3Etr%3Etd%3Anth-child(3)%3Espan%22).title)%3Bif(orderLoss%20%26%26(Number.parseInt(orderLoss.textContent.replace(%22%20%23%22%2C%22%22))%3E%3Dgrade%20%7C%7C%20firstScore%20%3E%3Dthreshold))%7Bturn.setAttribute(%22open%22%2C%22%22)%3B%7Delse%7Bturn.removeAttribute(%22open%22)%3B%7D%7D%7D%7D)()%3Bvoid(0);"
        }
    )
})
</script>
</body>
</html>
